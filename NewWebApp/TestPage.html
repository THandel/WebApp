<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>


    <script language="JavaScript">
        //This page is to test the date picker funtionality by itself without Highcharts
        //The date the user entered should persist after form submit
        function main() {
            var defaultDate = '2016-03-25';
            document.forms["inputForm"]["dateSelect"].value = defaultDate;
            var DateIn = getDateVal();
            console.log(new Date(DateIn));

            var getDate = dateInParse(new Date(DateIn));

            defaultDate = dateOutParse(new Date(DateIn));
            console.log(defaultDate);
        }

        function getDateVal() {
            console.log("getDateVal function fired");
            var DateIn = new Date(document.forms["inputForm"]["dateSelect"].value);  //get value in date selector box
            console.log("input date: " + DateIn);
            //document.forms["inputForm"]["dateSelect"].value = DateIn;
           // console.log("date out:" + document.forms["inputForm"]["dateSelect"].value);
            return DateIn;
        }

        function dateInParse(dateInput) {
            console.log("dateInParse function fired");
            var s = (dateInput.toString().split('-')); //date in selector is by default in format YYYY-MM-DD
            // Need to split this into DD-MM-YYYY
            var getDate = ([s[2], s[1], s[0]].join('-')); //join the split sections of the date back together
            return new Date(getDate);
        }
        function dateOutParse(dateInput) {
            console.log("dateOutParse function fired");
            var s = (dateInput.toString().split('-')); //date is in format DD-MM-YYYY
            // Need to split this into YYYY-MM-DD to pass it back to date selector
            var outDate = ([s[2], s[1], s[0]].join('-')); //join the split sections of the date back together
            defaultDate = new Date(outDate);
            console.log(outDate);
            return defaultDate;
        }
        </script>
    </head>
    <body onload="main()">
        <div id="chartContainer" style="width:100%; height:400px;"></div>
    
        <div id="inputDiv" style="width:100%; height:100px;">
            <form name='inputForm' method='get'>
                <fieldset>
                    <legend> Select a new date </legend>
                    <hr />
                    <input id="dateSelect" type="date" value=defaultDate onchange="getDateVal()"/>
                    <input id="dateSubmit" type="submit" value="Submit" onchange="$('#inputForm').submit();" />
                    <input id="dateReset" type="reset" value="Reset" />
                    <hr />
                </fieldset>
            </form>
        </div>
        
    </body>
    </html>